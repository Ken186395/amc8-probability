<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title>AMC 8 å‡ ä½•è®²è§£ Â· 3D äº¤äº’æ¼”ç¤º</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
        sans-serif;
      background: radial-gradient(circle at top, #fdfbff 0, #eef1f6 40%, #e3e6ee 100%);
      color: #111827;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    header {
      padding: 16px 24px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      backdrop-filter: blur(16px);
      background: rgba(255, 255, 255, 0.8);
      border-bottom: 1px solid rgba(148, 163, 184, 0.3);
      position: sticky;
      top: 0;
      z-index: 10;
    }

    header h1 {
      font-size: 1.3rem;
      font-weight: 700;
      letter-spacing: 0.04em;
    }

    header .sub-title {
      font-size: 0.85rem;
      color: #6b7280;
    }

    header a {
      font-size: 0.9rem;
      text-decoration: none;
      padding: 8px 14px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.6);
      background: white;
      color: #111827;
      box-shadow: 0 2px 6px rgba(15, 23, 42, 0.08);
      cursor: pointer;
      transition: transform 0.12s ease, box-shadow 0.12s ease,
        background 0.12s ease;
    }

    header a:hover {
      transform: translateY(-1px);
      box-shadow: 0 6px 18px rgba(15, 23, 42, 0.16);
      background: #f9fafb;
    }

    main {
      flex: 1;
      display: flex;
      padding: 16px;
      gap: 16px;
    }

    .panel {
      background: rgba(255, 255, 255, 0.96);
      border-radius: 18px;
      padding: 16px 18px;
      box-shadow: 0 12px 40px rgba(15, 23, 42, 0.12);
      border: 1px solid rgba(148, 163, 184, 0.25);
    }

    .left-panel {
      flex: 0 0 360px;
      display: flex;
      flex-direction: column;
      gap: 12px;
      max-width: 420px;
    }

    .right-panel {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 12px;
      min-width: 0;
    }

    .section-title {
      font-size: 1rem;
      font-weight: 700;
      margin-bottom: 4px;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .section-title span.badge {
      font-size: 0.75rem;
      font-weight: 600;
      padding: 2px 8px;
      border-radius: 999px;
      background: #eef2ff;
      color: #3730a3;
    }

    .select-row {
      display: flex;
      flex-direction: column;
      gap: 6px;
      margin-bottom: 4px;
    }

    label {
      font-size: 0.85rem;
      color: #4b5563;
    }

    select {
      padding: 8px 10px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.8);
      font-size: 0.9rem;
      outline: none;
      background: #f9fafb;
    }

    #problem-meta {
      font-size: 0.8rem;
      color: #6b7280;
    }

    .formula-card,
    .hint-card {
      padding: 10px 12px;
      border-radius: 14px;
      background: #f9fafb;
      border: 1px solid rgba(209, 213, 219, 0.9);
    }

    .formula-card code {
      font-family: SFMono-Regular, ui-monospace, Menlo, Monaco, Consolas,
        "Liberation Mono", "Courier New", monospace;
      font-size: 0.85rem;
      background: #111827;
      color: #e5e7eb;
      padding: 2px 6px;
      border-radius: 999px;
    }

    .example-block {
      margin-top: 4px;
      padding: 8px 10px;
      border-radius: 10px;
      background: #eef2ff;
      font-size: 0.82rem;
      color: #1f2937;
    }

    ul {
      padding-left: 18px;
      font-size: 0.85rem;
      color: #4b5563;
    }

    .small-title {
      font-size: 0.8rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: #9ca3af;
      margin-bottom: 2px;
    }

    /* æ§åˆ¶é¢æ¿ï¼ˆé•¿å®½é«˜æ»‘å—ï¼‰ */
    .controls-panel {
      display: flex;
      flex-direction: column;
      gap: 8px;
      margin-top: 4px;
    }

    .control-row {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 0.8rem;
    }

    .control-row span.label {
      width: 40px;
      color: #4b5563;
    }

    .control-row input[type="range"] {
      flex: 1;
    }

    .control-row span.value {
      width: 40px;
      text-align: right;
      font-variant-numeric: tabular-nums;
      color: #111827;
      font-weight: 600;
    }

    .result-row {
      font-size: 0.85rem;
      color: #111827;
      display: flex;
      justify-content: space-between;
      margin-top: 4px;
    }

    .result-row span.result-label {
      color: #4b5563;
    }

    .result-row span.result-value {
      font-weight: 700;
      font-variant-numeric: tabular-nums;
    }

    /* å³ä¾§ï¼š3D åŒºåŸŸ */
    #three-container {
      flex: 1;
      border-radius: 16px;
      overflow: hidden;
      background: radial-gradient(circle at top, #eef2ff, #1f2937);
      position: relative;
      min-height: 340px;
    }

    #three-overlay {
      position: absolute;
      left: 12px;
      top: 10px;
      z-index: 2;
      font-size: 0.8rem;
      color: #e5e7eb;
      background: rgba(15, 23, 42, 0.55);
      padding: 6px 10px;
      border-radius: 999px;
      backdrop-filter: blur(10px);
      display: flex;
      gap: 8px;
      align-items: center;
    }

    #three-overlay span.key {
      padding: 2px 6px;
      border-radius: 6px;
      border: 1px solid rgba(148, 163, 184, 0.8);
      font-size: 0.7rem;
      background: rgba(15, 23, 42, 0.9);
    }

    #rendererCanvas {
      width: 100%;
      height: 100%;
      display: block;
    }

    .tips-card {
      padding: 10px 12px;
      border-radius: 16px;
      background: #f9fafb;
      border: 1px dashed rgba(148, 163, 184, 0.9);
      font-size: 0.82rem;
      color: #4b5563;
    }

    @media (max-width: 900px) {
      main {
        flex-direction: column;
      }
      .left-panel {
        flex: none;
        width: 100%;
        max-width: 100%;
      }
      .right-panel {
        flex: none;
        width: 100%;
      }
    }
  </style>
</head>
<body>
  <header>
    <div>
      <h1>AMC 8 å‡ ä½•è®²è§£ Â· 3D äº¤äº’å®éªŒå®¤</h1>
      <div class="sub-title">ç«‹ä½“å‡ ä½• Â· ä½“ç§¯è¡¨é¢ç§¯ Â· å¯æ—‹è½¬åŠ¨ç”»æ¼”ç¤º</div>
    </div>
    <!-- å¦‚æœæœ‰é¦–é¡µï¼Œå°±æŠŠ href æ”¹æˆä½ çš„ index.html -->
    <a href="index.html">â† å›åˆ°ç»ƒä¹ ä¸»é¡µ</a>
  </header>

  <main>
    <!-- å·¦è¾¹ï¼šé¢˜ç›® + è®²è§£ + æ•°å­¦è®¡ç®— -->
    <section class="panel left-panel">
      <div class="section-title">
        é€‰æ‹©ä¸€ä¸ªå‡ ä½•ä¸»é¢˜
        <span class="badge">AMC 8</span>
      </div>
      <div class="select-row">
        <label for="problemSelect">é¢˜å‹ï¼š</label>
        <select id="problemSelect">
          <option value="box">é•¿æ–¹ä½“ä½“ç§¯ &amp; è¡¨é¢ç§¯</option>
          <option value="cube-net">æ­£æ–¹ä½“ä¸å±•å¼€å›¾ï¼ˆç½‘æ ¼ï¼‰</option>
        </select>
        <div id="problem-meta"></div>
      </div>

      <div class="small-title">å…¬å¼å›é¡¾</div>
      <div class="formula-card">
        <div id="formula-text"></div>
        <div class="example-block" id="example-text"></div>
      </div>

      <div class="small-title" style="margin-top: 8px;">æ€è·¯æç¤ºï¼ˆAMC 8 è§†è§’ï¼‰</div>
      <div class="hint-card" id="hint-text"></div>

      <!-- æ§åˆ¶é¢æ¿ï¼ˆæ ¹æ®é¢˜å‹å˜åŒ–ï¼‰ -->
      <div class="controls-panel" id="box-controls">
        <div class="small-title" style="margin-top: 4px;">äº¤äº’å‚æ•°ï¼ˆæ‹–åŠ¨æ»‘å—è§‚å¯Ÿç«‹ä½“å˜åŒ–ï¼‰</div>
        <div class="control-row">
          <span class="label">é•¿ L</span>
          <input id="lenSlider" type="range" min="1" max="10" step="1" value="4" />
          <span class="value"><span id="lenValue">4</span> u</span>
        </div>
        <div class="control-row">
          <span class="label">å®½ W</span>
          <input id="widSlider" type="range" min="1" max="10" step="1" value="3" />
          <span class="value"><span id="widValue">3</span> u</span>
        </div>
        <div class="control-row">
          <span class="label">é«˜ H</span>
          <input id="heiSlider" type="range" min="1" max="10" step="1" value="2" />
          <span class="value"><span id="heiValue">2</span> u</span>
        </div>

        <div class="result-row">
          <span class="result-label">ä½“ç§¯ Vï¼š</span>
          <span class="result-value" id="volumeValue"></span>
        </div>
        <div class="result-row">
          <span class="result-label">è¡¨é¢ç§¯ Sï¼š</span>
          <span class="result-value" id="surfaceValue"></span>
        </div>
      </div>

      <div class="controls-panel" id="cube-controls" style="display: none;">
        <div class="small-title" style="margin-top: 4px;">äº¤äº’å‚æ•°</div>
        <div class="control-row">
          <span class="label">æ£±é•¿ a</span>
          <input id="cubeSlider" type="range" min="1" max="8" step="1" value="3" />
          <span class="value"><span id="cubeValue">3</span> u</span>
        </div>
        <div class="result-row">
          <span class="result-label">ä½“ç§¯ Vï¼š</span>
          <span class="result-value" id="cubeVolume"></span>
        </div>
        <div class="result-row">
          <span class="result-label">è¡¨é¢ç§¯ Sï¼š</span>
          <span class="result-value" id="cubeSurface"></span>
        </div>
        <div class="result-row">
          <span class="result-label">å±•å¼€å›¾ï¼š</span>
          <span class="result-value">6 ä¸ªæ­£æ–¹å½¢æ‹¼æˆâ€œåå­—å½¢â€</span>
        </div>
      </div>
    </section>

    <!-- å³è¾¹ï¼šThree.js 3D ç«‹ä½“ -->
    <section class="panel right-panel">
      <div class="section-title">
        äº¤äº’å¼ 3D æ¼”ç¤º
        <span class="badge">æ‹–åŠ¨æ—‹è½¬</span>
      </div>
      <div id="three-container">
        <div id="three-overlay">
          <span>é¼ æ ‡æ‹–åŠ¨æ—‹è½¬ Â· æ»šè½®ç¼©æ”¾</span>
        </div>
        <canvas id="rendererCanvas"></canvas>
      </div>

      <div class="tips-card">
        ğŸ§  <b>å¦‚ä½•ç”¨åœ¨ AMC 8ï¼š</b>  
        å¾ˆå¤š AMC 8 é¢˜ç›®ä¸ä¼šç›´æ¥ç»™ä½ â€œå¥—å…¬å¼â€ï¼Œè€Œæ˜¯ä¼šè®©ä½ 
        <ul>
          <li>çœ‹æ‡‚ç«‹ä½“å›¾ï¼ˆé•¿æ–¹ä½“ / æ­£æ–¹ä½“ / å †å æ–¹å—ï¼‰</li>
          <li>è‡ªå·±æ•°å‡ºâ€œé•¿åº¦ã€å®½åº¦ã€é«˜åº¦â€æˆ–â€œå‡ ä¸ªå°æ–¹å—â€</li>
          <li>å†æŠŠå®ƒä»¬ä»£å…¥ä½“ç§¯æˆ–è¡¨é¢ç§¯å…¬å¼</li>
          <li>æœ‰æ—¶è¿˜è¦æŠŠç«‹ä½“â€œå±•å¼€â€æˆå¹³é¢æ¥åšå‘¨é•¿/æœ€çŸ­è·¯å¾„é¢˜</li>
        </ul>
        å»ºè®® Lynne è‡ªå·±æ‹–åŠ¨æ»‘å—å’Œç«‹ä½“ï¼Œå¤šé—®è‡ªå·±ä¸¤å¥ï¼šâ€œè¿™ä¸ªæ•°åœ¨å›¾é‡Œä»£è¡¨å“ªä¸€æ¡è¾¹ï¼Ÿâ€ã€â€œå¦‚æœç¿»å¼€å˜æˆå±•å¼€å›¾ï¼Œä¼šå˜æˆä»€ä¹ˆæ ·å­ï¼Ÿâ€
      </div>
    </section>
  </main>

  <!-- Three.js CDN -->
  <script src="https://cdn.jsdelivr.net/npm/three@0.161.0/build/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.161.0/examples/js/controls/OrbitControls.js"></script>

  <script>
    // ====== æ–‡æœ¬å†…å®¹ï¼ˆé¢˜ç›®è®²è§£ï¼‰ ======
    const problems = {
      "box": {
        meta: "å¸¸è§è€ƒç‚¹ï¼šä½“ç§¯ã€è¡¨é¢ç§¯ã€ç›’å­è£…å¤šå°‘ä¸œè¥¿ã€æ¶‚è‰²ã€è´´æ ‡ç­¾ç­‰ã€‚",
        formula:
          "é•¿æ–¹ä½“ä½“ç§¯ï¼š<code>V = L Ã— W Ã— H</code><br>è¡¨é¢ç§¯ï¼š<code>S = 2(LW + LH + WH)</code>",
        example:
          "ä¾‹ï¼šä¸€ä¸ªé•¿å®½é«˜åˆ†åˆ«ä¸º 4, 3, 2 çš„ç›’å­ï¼Œä½“ç§¯æ˜¯å¤šå°‘ï¼Ÿè¡¨é¢ç§¯æ˜¯å¤šå°‘ï¼Ÿ<br>ä½“ç§¯ï¼š4 Ã— 3 Ã— 2 = 24 ç«‹æ–¹å•ä½<br>è¡¨é¢ç§¯ï¼š2(4Ã—3 + 4Ã—2 + 3Ã—2) = 2(12 + 8 + 6) = 52 å¹³æ–¹å•ä½",
        hint:
          "AMC 8 é‡Œé¢ç»å¸¸ä¼šå‡ºç°â€œä¸€ä¸ªé•¿æ–¹ä½“ç›’å­è£…æ»¡å°æ–¹å—â€ä¹‹ç±»çš„é¢˜ï¼šå…ˆç”¨ä½“ç§¯ç®—å‡ºèƒ½è£…å¤šå°‘ä¸ªå°æ–¹å—ï¼Œæˆ–è€…ç”¨è¡¨é¢ç§¯ç®—è¦æ¶‚å¤šå°‘é¢ç§¯æ²¹æ¼† / ç²˜å¤šå°‘çº¸ã€‚<br><br>åšé¢˜æ—¶è¦ç‰¹åˆ«æ³¨æ„ï¼š<ul><li>å•ä½è¦ç»Ÿä¸€ï¼Œä¾‹å¦‚éƒ½ç”¨ cm æˆ–éƒ½ç”¨ unit</li><li>æŸäº›è¾¹å¯èƒ½æ˜¯â€œå‡ å—æ–¹ç –æ‹¼èµ·æ¥çš„é•¿åº¦â€ï¼Œè¦æ•°æ¸…æ¥š</li><li>æœ‰æ—¶é¢˜ç›®ä¸ä¼šç›´æ¥å‘Šè¯‰ä½  L, W, Hï¼Œéœ€è¦ä»å›¾é‡Œè¯»å‡ºæ¥</li></ul>"
      },
      "cube-net": {
        meta: "å¸¸è§è€ƒç‚¹ï¼šæ­£æ–¹ä½“ä½“ç§¯ã€è¡¨é¢ç§¯ã€å±•å¼€å›¾ã€æœ€çŸ­è·¯å¾„ï¼ˆå°è™«åœ¨ç›’å­è¡¨é¢çˆ¬ï¼‰ã€‚",
        formula:
          "æ­£æ–¹ä½“ï¼šæ¯æ¡æ£±é•¿ä¸º aï¼Œåˆ™<br>ä½“ç§¯ï¼š<code>V = aÂ³</code><br>è¡¨é¢ç§¯ï¼š<code>S = 6aÂ²</code>",
        example:
          "ä¾‹ï¼šä¸€ä¸ªæ­£æ–¹ä½“æ¯æ¡æ£±é•¿ 3ï¼Œä½“ç§¯å’Œè¡¨é¢ç§¯åˆ†åˆ«æ˜¯å¤šå°‘ï¼Ÿ<br>ä½“ç§¯ï¼š3Â³ = 27 ç«‹æ–¹å•ä½<br>è¡¨é¢ç§¯ï¼š6 Ã— 3Â² = 54 å¹³æ–¹å•ä½<br><br>å±•å¼€å›¾ï¼š6 ä¸ªè¾¹é•¿ä¸º 3 çš„å°æ­£æ–¹å½¢ã€‚",
        hint:
          "AMC 8 å¸¸è§é¢˜å‹ï¼š<ul><li>ç»™ä½ ä¸€ä¸ªå±•å¼€å›¾ï¼Œé—®èƒ½ä¸èƒ½æŠ˜æˆæ­£æ–¹ä½“</li><li>å°è™«ä»ä¸€ä¸ªé¡¶ç‚¹çˆ¬åˆ°å¦ä¸€ä¸ªé¡¶ç‚¹ï¼Œèµ°çš„æ˜¯â€œç›’å­è¡¨é¢æœ€çŸ­è·¯â€ï¼Œè¿™æ—¶è¦æŠŠç›’å­â€œå±•å¼€â€ååœ¨å¹³é¢ä¸Šç”»ä¸€æ¡ç›´çº¿</li><li>æ¶‚è‰²é¢˜ï¼šæ¯”å¦‚â€œæŠŠæ­£æ–¹ä½“çš„å¤–è¡¨é¢å…¨éƒ¨æ¶‚è‰²ï¼Œå†åˆ‡æˆ 1Ã—1Ã—1 çš„å°æ–¹å—ï¼Œæœ‰å‡ ä¸ªå°æ–¹å—æœ‰ 3 ä¸ªé¢è¢«æ¶‚è‰²ï¼Ÿâ€</li></ul>ç†è§£å±•å¼€å›¾ = å®é™…ä¸Šæ˜¯åœ¨è„‘å­é‡Œâ€œæŠŠç«‹ä½“æ‹†å¼€æ‘Šå¹³â€ï¼Œè¿™å¯¹è§£ç©ºé—´å‡ ä½•é¢˜éå¸¸æœ‰å¸®åŠ©ã€‚"
      }
    };

    const problemSelect = document.getElementById("problemSelect");
    const metaEl = document.getElementById("problem-meta");
    const formulaEl = document.getElementById("formula-text");
    const exampleEl = document.getElementById("example-text");
    const hintEl = document.getElementById("hint-text");

    const boxControls = document.getElementById("box-controls");
    const cubeControls = document.getElementById("cube-controls");

    const lenSlider = document.getElementById("lenSlider");
    const widSlider = document.getElementById("widSlider");
    const heiSlider = document.getElementById("heiSlider");
    const lenValue = document.getElementById("lenValue");
    const widValue = document.getElementById("widValue");
    const heiValue = document.getElementById("heiValue");
    const volumeValue = document.getElementById("volumeValue");
    const surfaceValue = document.getElementById("surfaceValue");

    const cubeSlider = document.getElementById("cubeSlider");
    const cubeValue = document.getElementById("cubeValue");
    const cubeVolume = document.getElementById("cubeVolume");
    const cubeSurface = document.getElementById("cubeSurface");

    function updateProblemText(key) {
      const p = problems[key];
      metaEl.innerHTML = p.meta;
      formulaEl.innerHTML = p.formula;
      exampleEl.innerHTML = p.example;
      hintEl.innerHTML = p.hint;

      if (key === "box") {
        boxControls.style.display = "flex";
        cubeControls.style.display = "none";
      } else {
        boxControls.style.display = "none";
        cubeControls.style.display = "flex";
      }
    }

    function updateBoxMath() {
      const L = Number(lenSlider.value);
      const W = Number(widSlider.value);
      const H = Number(heiSlider.value);
      lenValue.textContent = L;
      widValue.textContent = W;
      heiValue.textContent = H;
      const V = L * W * H;
      const S = 2 * (L * W + L * H + W * H);
      volumeValue.textContent = `${V} ç«‹æ–¹å•ä½`;
      surfaceValue.textContent = `${S} å¹³æ–¹å•ä½`;
    }

    function updateCubeMath() {
      const a = Number(cubeSlider.value);
      cubeValue.textContent = a;
      const V = a * a * a;
      const S = 6 * a * a;
      cubeVolume.textContent = `${V} ç«‹æ–¹å•ä½`;
      cubeSurface.textContent = `${S} å¹³æ–¹å•ä½`;
    }

    // ====== Three.js åœºæ™¯æ­å»º ======
    let scene, camera, renderer, controls;
    let currentGroup = null;

    function initThree() {
      const canvas = document.getElementById("rendererCanvas");
      const container = document.getElementById("three-container");

      scene = new THREE.Scene();
      scene.background = new THREE.Color(0x0f172a);

      const fov = 45;
      const aspect = container.clientWidth / container.clientHeight;
      camera = new THREE.PerspectiveCamera(fov, aspect, 0.1, 100);
      camera.position.set(6, 5, 8);

      renderer = new THREE.WebGLRenderer({
        canvas,
        antialias: true
      });
      renderer.setPixelRatio(window.devicePixelRatio);
      renderer.setSize(container.clientWidth, container.clientHeight);

      // å…‰ç…§
      const hemiLight = new THREE.HemisphereLight(0xffffff, 0x0f172a, 0.7);
      scene.add(hemiLight);

      const dirLight = new THREE.DirectionalLight(0xffffff, 0.9);
      dirLight.position.set(5, 10, 7);
      scene.add(dirLight);

      const ambient = new THREE.AmbientLight(0xffffff, 0.2);
      scene.add(ambient);

      // åœ°æ¿
      const grid = new THREE.GridHelper(20, 20, 0x6b7280, 0x111827);
      grid.position.y = -2;
      scene.add(grid);

      // è½¨é“æ§åˆ¶å™¨
      controls = new THREE.OrbitControls(camera, renderer.domElement);
      controls.enableDamping = true;
      controls.dampingFactor = 0.08;
      controls.rotateSpeed = 0.7;
      controls.zoomSpeed = 0.7;
      controls.target.set(0, 0, 0);

      window.addEventListener("resize", onWindowResize);
      animate();
    }

    function onWindowResize() {
      const container = document.getElementById("three-container");
      const width = container.clientWidth;
      const height = container.clientHeight;
      camera.aspect = width / height;
      camera.updateProjectionMatrix();
      renderer.setSize(width, height);
    }

    function animate() {
      requestAnimationFrame(animate);
      controls.update();
      renderer.render(scene, camera);
    }

    // ====== ç»˜åˆ¶é•¿æ–¹ä½“ ======
    function createBox(L, W, H) {
      const group = new THREE.Group();

      const geometry = new THREE.BoxGeometry(L, H, W);

      // ä¸»ä½“
      const material = new THREE.MeshStandardMaterial({
        color: 0x4f46e5,
        metalness: 0.3,
        roughness: 0.25,
        transparent: true,
        opacity: 0.94
      });

      const boxMesh = new THREE.Mesh(geometry, material);
      group.add(boxMesh);

      // çº¿æ¡†
      const edges = new THREE.EdgesGeometry(geometry);
      const lineMaterial = new THREE.LineBasicMaterial({ color: 0xf9fafb });
      const line = new THREE.LineSegments(edges, lineMaterial);
      group.add(line);

      // è½»å¾®æŠ¬é«˜
      group.position.y = H / 2 - 1;

      return group;
    }

    // ====== ç»˜åˆ¶æ­£æ–¹ä½“ + å±•å¼€å›¾ ======
    function createCubeWithNet(a) {
      const group = new THREE.Group();

      // æ­£æ–¹ä½“ä¸»ä½“
      const cubeGeo = new THREE.BoxGeometry(a, a, a);
      const cubeMat = new THREE.MeshStandardMaterial({
        color: 0x10b981,
        metalness: 0.3,
        roughness: 0.25,
        transparent: true,
        opacity: 0.94
      });
      const cube = new THREE.Mesh(cubeGeo, cubeMat);
      const edges = new THREE.EdgesGeometry(cubeGeo);
      const lineMat = new THREE.LineBasicMaterial({ color: 0xf9fafb });
      const cubeLines = new THREE.LineSegments(edges, lineMat);

      const cubeGroup = new THREE.Group();
      cubeGroup.add(cube);
      cubeGroup.add(cubeLines);
      cubeGroup.position.set(-a * 1.3, 0, 0);
      group.add(cubeGroup);

      // å±•å¼€å›¾ï¼š6 ä¸ªæ­£æ–¹å½¢æ‘†æˆåå­—å½¢
      const planeGeo = new THREE.PlaneGeometry(a, a);
      const planeMat = new THREE.MeshStandardMaterial({
        color: 0x0ea5e9,
        side: THREE.DoubleSide,
        transparent: true,
        opacity: 0.9
      });
      const edgeMat = new THREE.LineBasicMaterial({ color: 0x0f172a });

      const netGroup = new THREE.Group();
      const positions = [
        [0, 0, 0], // ä¸­å¿ƒ
        [0, a, 0],
        [0, -a, 0],
        [-a, 0, 0],
        [a, 0, 0],
        [0, 0, a] // æƒ³è±¡ä¸ºç¿»èµ·æ¥çš„ä¸€ä¸ªé¢
      ];

      positions.forEach(([x, y, z], idx) => {
        const plane = new THREE.Mesh(planeGeo, planeMat.clone());
        const edgesPlane = new THREE.EdgesGeometry(planeGeo);
        const outline = new THREE.LineSegments(edgesPlane, edgeMat);

        const one = new THREE.Group();
        plane.position.set(0, 0, 0);
        outline.position.set(0, 0, 0);
        one.add(plane);
        one.add(outline);
        one.position.set(x, y, z);
        netGroup.add(one);
      });

      // æŠŠå±•å¼€å›¾å¹³æ”¾åœ¨åœ°é¢ä¸Šï¼ˆy æ–¹å‘å½“æˆå¹³é¢åæ ‡ï¼‰
      netGroup.rotation.x = -Math.PI / 2;
      netGroup.position.set(a * 1.6, -1.5, 0);
      group.add(netGroup);

      // æ•´ä½“ç¨å¾®æŠ¬é«˜
      group.position.y = -0.2;

      return group;
    }

    function update3DForBox() {
      const L = Number(lenSlider.value);
      const W = Number(widSlider.value);
      const H = Number(heiSlider.value);

      if (currentGroup) {
        scene.remove(currentGroup);
      }
      currentGroup = createBox(L, W, H);
      scene.add(currentGroup);
    }

    function update3DForCube() {
      const a = Number(cubeSlider.value);
      if (currentGroup) {
        scene.remove(currentGroup);
      }
      currentGroup = createCubeWithNet(a);
      scene.add(currentGroup);
    }

    // ====== äº‹ä»¶ç»‘å®š ======
    problemSelect.addEventListener("change", () => {
      const key = problemSelect.value;
      updateProblemText(key);
      if (key === "box") {
        updateBoxMath();
        update3DForBox();
      } else {
        updateCubeMath();
        update3DForCube();
      }
    });

    lenSlider.addEventListener("input", () => {
      updateBoxMath();
      update3DForBox();
    });
    widSlider.addEventListener("input", () => {
      updateBoxMath();
      update3DForBox();
    });
    heiSlider.addEventListener("input", () => {
      updateBoxMath();
      update3DForBox();
    });

    cubeSlider.addEventListener("input", () => {
      updateCubeMath();
      update3DForCube();
    });

    // ====== åˆå§‹åŒ– ======
    updateProblemText("box");
    updateBoxMath();
    updateCubeMath();
    initThree();
    update3DForBox();
  </script>
</body>
</html>
